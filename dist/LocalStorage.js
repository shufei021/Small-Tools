!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LocalStorage=e():t.LocalStorage=e()}(window,(function(){return function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){function o(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=o=function(t){return typeof t}:t.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(e)}t.exports=o},function(t,e,o){"use strict";o.r(e);var r=o(0),n=o.n(r);function i(t,e){t?this.init(t):console.warn('【localStorage】:localStorage-root-key "['.concat(t,']" is required'))}i.prototype.init=function(t){this.is(t)&&localStorage.removeItem(t),this.name=t,this.data={},localStorage.setItem(this.name,JSON.stringify(this.data))},i.prototype.is=function(t){return void 0!==localStorage[t]},i.prototype.type=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},i.prototype.set=function(){if(this.is(this.name)){if(1===arguments.length&&null!==arguments[0]&&"object"===n()(arguments[0]))for(var t in arguments[0])this.data[t]=arguments[0][t];else 2===arguments.length&&"string"==typeof arguments[0]&&(this.data[arguments[0]]=arguments[1]);localStorage.setItem(this.name,JSON.stringify(this.data))}},i.prototype.edit=function(){if(this.is(this.name)){var t=new Event("setAttrEvent");t.beforeUpdated=JSON.parse(JSON.stringify(this.data));for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];for(var n=o.slice(0,o.length-1),i=o[o.length-1],a=this.data,s=0;s<n.length;s++)a.hasOwnProperty(n[s])&&(s==n.length-1?a[n[s]]=i:a=a[n[s]]);t.updated=this.data,localStorage.setItem(this.name,JSON.stringify(this.data)),window.dispatchEvent(t)}},i.prototype.get=function(){if(this.is(this.name)){for(var t=null,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];for(var n=0;n<o.length;n++){if(0==n){if(!this.data[o[n]])throw Error(o[n]+"不存在")}else if(!t.hasOwnProperty(o[n]))throw Error(o[n-1]+"对象下面不存在key："+o[n]);if(0==n&&"object"===this.type(this.data[o[n]]))t=this.data[o[n]];else if(0==n)t=this.data[o[n]];else{if(!(t=t[o[n]]))throw Error(o[n]+"键对应的值不是一个对象");if("array"===this.type(t))throw Error(o[n]+"键对应的值不是一个对象")}}return t}},i.prototype.del=function(){if(this.is(this.name)){var t=new Event("removeItemAttrEvent");t.beforeUpdated=JSON.parse(JSON.stringify(this.data));for(var e=this.data,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];for(var i=0;i<r.length;i++){if(!e.hasOwnProperty(r[i]))throw Error("LocalStorage根对象不存在该属性："+r[i]);i==r.length-1?(delete e[r[i]],t.key=r[i],t.updated=this.data,window.dispatchEvent(t)):e=e[r[i]]}localStorage.setItem(this.name,JSON.stringify(this.data))}},i.prototype.destroy=function(){localStorage.removeItem(this.name)},i.prototype.clear=function(){localStorage.clear()},i.prototype.listener=function(t){this.is(this.name)&&(window.addEventListener("setAttrEvent",(function(e){t&&t({type:"update",beforeUpdated:e.beforeUpdated,updated:e.updated})})),window.addEventListener("removeItemAttrEvent",(function(e){t&&t({type:"del",beforeUpdated:e.beforeUpdated,updated:e.updated})})))},e.default=i}]).default}));
//# sourceMappingURL=LocalStorage.js.map